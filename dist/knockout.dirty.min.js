!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("ko"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko)}(function(a,b){b=a.DirtyFlag=function(){};var c=function(b,c){"use strict";var d,e=this,f=a.observable(a.toJSON(b)),g=a.observable(c);if(!b)throw new Error('You need to pass a "target" to flag.');return d=function(){return e.getDirty=function(){var c,d=a.toJS(b),e=JSON.parse(f()),g=[];for(c in d)d.hasOwnProperty(c)&&a.isObservable(b[c])&&!a.isComputed(b[c])&&JSON.stringify(e[c])!==JSON.stringify(d[c])&&g.push(b[c]);return g},e.isDirty=a.computed(function(){return g()||a.toJSON(b)!==f()}),e.restore=function(){var c,d=a.toJS(b),e=JSON.parse(f());for(c in d)d.hasOwnProperty(c)&&a.isObservable(b[c])&&!a.isComputed(b[c])&&JSON.stringify(e[c])!==JSON.stringify(d[c])&&b[c](e[c])},e.resetFlag=function(){g(!1),f(a.toJSON(b))},e}};return b.DirtyFlag=c,a.utils.extend(a,b),b});